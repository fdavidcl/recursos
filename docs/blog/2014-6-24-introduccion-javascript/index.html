<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta charset="utf-8">
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/pure-min.css" />
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/grids-responsive-min.css" />
      <!--link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/pure/0.6.0/menus-min.css" /-->
      <link rel="stylesheet" type="text/css" href="/assets/fonts/css/iconim.css" />
      <link rel="stylesheet" type="text/css" href="/assets/css/default.css" />
      <link rel="stylesheet" type="text/css" href="/assets/css/pygments-friendly.css" />
      <link rel="alternate" type="application/rss+xml" title="RSS" href="/assets/feed.xml" />

      <!-- Favicon -->
      <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicon.ico" />
      <link rel="apple-touch-icon" sizes="160x160" href="/assets/images/favicon-160.png">
    	<meta name="msapplication-TileColor" content="#FFFFFF">
    	<meta name="msapplication-TileImage" content="/assets/images/favicon-160.png">
      <meta name="theme-color" content="#6789ab">

      <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
      <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

      <script type="text/javascript">
         WebFont.load({
            google: {
               families: ["Lato:400,300,700,400italic:latin", "Source+Code+Pro:400,700:latin"]
            }
         });
      </script>
      <script type="text/javascript">
            MathJax.Hub.Config({
               tex2jax: {
                  inlineMath: [],
                  displayMath: [],
               }
            });
      </script>
      <title>Introducción a JavaScript. Programación con prototipos - libreim</title>
   </head>
   <body class="">
      <header>
  <div class="pure-menu pure-menu-horizontal pure-g">
    <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5"></div>
    <div class="pure-u-22-24 pure-u-md-22-24 pure-u-lg-3-5">
      <input type="checkbox" id="show-menu">
      <label class="hamburger" for="show-menu"></label>
      <div class="sites">
        <a href="/" class="pure-menu-link" title="Inicio">Inicio</a>
        <a href="/blog/" class="pure-menu-link" title="Inicio">Blog</a>
        <a href="/recursos/" class="pure-menu-link" title="Awesome">Recursos</a>
        <a href="/contributing/" class="pure-menu-link" title="Participa">Participa</a>
      </div>
      <a href="/" class="site-title pure-menu-heading">&nbsp;</a>
    </div>
    <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5"></div>
  </div>
</header>

      <div class="pure-g">
  <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5"></div>
  <div class="pure-u-22-24 pure-u-md-22-24 pure-u-lg-3-5 pure-u-xl-3-5">
    <article class="container" lang="es">
      
<div class="category">
  Programación
</div>





<h1>
  
  <a href="/blog/2014-6-24-introduccion-javascript/">
    Introducción a JavaScript. Programación con prototipos
  </a>
  
</h1>




<div class="pure-g">
  <div class="pure-u-1 pure-u-md-2-3 pure-u-lg-2-3">
    

<div class="post-data">
  
  
  
   
  <span class="author">fdavidcl</span>
  
  

  
  
  <a class="date" href="/blog/2014-6-24-introduccion-javascript/">
    24-06-2014
  </a>
  <a class="dsq-comment-count comments" href="/blog/2014-6-24-introduccion-javascript/#disqus_thread" data-disqus-identifier="/blog/introduccion-javascript">

  </a>
</div>

<div class="post-content">

  <div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Hello World!!"</span><span class="p">);</span>
</code></pre>
</div>

<p>JavaScript (JS) es el lenguaje de programación desarrollado por Netscape para
la web<sup id="fnref:jsannouncement"><a href="#fn:jsannouncement" class="footnote">1</a></sup>. Se trata de un lenguaje de script,
generalmente interpretado por el navegador del usuario, esto es, se ejecuta en
el <em>cliente</em><sup id="fnref:mdnjs"><a href="#fn:mdnjs" class="footnote">2</a></sup>. Hablamos del cliente refiriéndonos a la máquina del usuario final
que visitará el sitio web, y del servidor para referirnos a la máquina o el
conjunto de ellas que lo almacenan y proporcionan. Sin embargo, también se
puede utilizar JavaScript como lenguaje de servidor gracias a
<a href="http://nodejs.org/">Node.js</a>.</p>

<!--more-->

<p>JavaScript tiene una sintaxis similar a la de C++ o Java, y puede funcionar como
un lenguaje procedimental o como uno orientado a objetos. Además, es capaz de
responder a eventos generados mediante la interacción del usuario, lo que es
generalmente una de sus principales funciones.</p>

<dl>
  <dt>Nota</dt>
  <dd>Pese al nombre, JavaScript no deriva de Java, los dos lenguajes apenas
se parecen, exceptuando el aspecto de la sintaxis. De hecho, se llamó <em>Mocha</em> y
<em>LiveScript</em> antes de obtener su nombre definitivo.</dd>
</dl>

<p>Para ejecutar tu propio código JavaScript, pulsa F12 o Ctrl-Mayus-C en tu
navegador. En las herramientas de desarrollador tendrás una consola JS
interactiva disponible para experimentar.
Es importante notar que cada navegador implementa JavaScript de una manera
ligeramente distinta, luego puede haber peculiaridades en la forma de
aprovechar algunos recursos del navegador. El estándar del lenguaje se
denomina <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf">ECMAScript</a>.</p>

<h2 id="sintaxis-y-tipos">Sintaxis y tipos</h2>

<h3 id="declaraciones-variables-y-funciones">Declaraciones, variables y funciones</h3>

<p>JavaScript no es fuertemente tipado, por lo que declaramos las variables
simplemente con la palabra reservada <code class="highlighter-rouge">var</code>.  Declaramos una constante con
<code class="highlighter-rouge">const</code> y una función con <code class="highlighter-rouge">var ... = function()</code> o <code class="highlighter-rouge">function ...()</code>.  También podemos declarar
variables simplemente con una asignación, pero
entonces serán globales, lo que es equivalente a  declararlas fuera de
cualquier función (las variables y funciones globales se convierten en
atributos del objeto <code class="highlighter-rouge">window</code>).</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">una</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">PI</span> <span class="o">=</span> <span class="mf">3.141592</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">perimetro_circulo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">radio</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Esta variable no estaba declarada antes,</span>
    <span class="c1">// así que es global</span>
    <span class="nx">tau</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">PI</span><span class="p">;</span>

    <span class="k">return</span> <span class="nx">tau</span> <span class="o">*</span> <span class="nx">radio</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Otra forma de declarar funciones</span>
<span class="kd">function</span> <span class="nx">area_circulo</span><span class="p">(</span><span class="nx">radio</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">PI</span> <span class="o">*</span> <span class="nx">radio</span> <span class="o">*</span> <span class="nx">radio</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<dl>
  <dt>Nota</dt>
  <dd>JavaScript acepta ciertos símbolos a la hora de nombrar variables. Un
 nombre de variable no puede empezar por un número, pero sí que puede
 comenzar y contener símbolos como <code class="highlighter-rouge">$</code>, <code class="highlighter-rouge">_</code> o incluso <script type="math/tex">\pi</script> <sup id="fnref:jsidentifiers"><a href="#fn:jsidentifiers" class="footnote">3</a></sup>.</dd>
</dl>

<h3 id="colecciones-y-objetos">Colecciones y objetos</h3>
<p>En JS utilizamos los corchetes para representar arrays. Estos pueden
contener objetos de distinta naturaleza, por ejemplo, el siguiente array
es completamente válido:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">v</span><span class="err">á</span><span class="nx">lido</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span> <span class="s2">"Hola"</span><span class="p">,</span> <span class="sr">/^</span><span class="se">[</span><span class="sr">a-z</span><span class="se">]</span><span class="sr">/</span><span class="p">];</span>
</code></pre>
</div>

<p>Los objetos son uno de los pilares de JS. En este lenguaje, los objetos
existen, no se crean como instancias de una clase, por lo que podemos declarar
nuevos con la siguiente sintaxis:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">un_objeto</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">dato</span><span class="p">:</span> <span class="s2">"valor"</span><span class="p">,</span>
    <span class="na">otro</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="na">una_funcion</span><span class="p">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// Acceso a datos:</span>
<span class="nx">un_objeto</span><span class="p">.</span><span class="nx">otro</span><span class="p">;</span>     <span class="c1">// --&gt; 3</span>
<span class="nx">un_objeto</span><span class="p">[</span><span class="s2">"dato"</span><span class="p">];</span>  <span class="c1">// --&gt; "valor"</span>
<span class="nx">un_objeto</span><span class="p">.</span><span class="nx">una_funcion</span><span class="p">();</span>
</code></pre>
</div>

<p>La forma en que se define el objeto es conocida como <em>JavaScript Object
Notation</em> (JSON). Un objeto puede funcionar como un
diccionario, de la forma <code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">clave:</span><span class="w"> </span><span class="nt">"valor"</span><span class="err">,</span><span class="w"> </span><span class="err">clave2</span><span class="p">:</span><span class="w"> </span><span class="s2">"otro"</span><span class="w"> </span><span class="p">}</span></code>. Solemos llamar
<em>propiedad</em> a cada una de las parejas <em>clave-valor</em> de un objeto.</p>

<h3 id="tipos">Tipos</h3>
<p>JavaScript tiene algunos tipos básicos: <code class="highlighter-rouge">Number</code>, <code class="highlighter-rouge">String</code>, <code class="highlighter-rouge">Boolean</code>.
El resto de objetos (los de <code class="highlighter-rouge">Date</code>, <code class="highlighter-rouge">RegExp</code>…) serán de tipo
<code class="highlighter-rouge">Object</code>, y las funciones y constructores son de tipo <code class="highlighter-rouge">Function</code>.
Se puede comprobar el tipo de un objeto mediante <code class="highlighter-rouge">typeof</code>:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="k">typeof</span> <span class="mi">5</span><span class="p">;</span> <span class="c1">// --&gt; Number</span>
<span class="k">typeof</span> <span class="p">[];</span> <span class="c1">// --&gt; Object</span>
<span class="k">typeof</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">;</span> <span class="c1">// --&gt; Function</span>
</code></pre>
</div>

<p>Además, se utilizan algunas palabras para identificar variables nulas y
no inicializadas: <code class="highlighter-rouge">null</code> y <code class="highlighter-rouge">undefined</code>, respectivamente. Para indicar
resultados de operaciones matemáticas no válidas se usa <code class="highlighter-rouge">NaN</code> (o <code class="highlighter-rouge">Infinity</code>,
en caso de divisiones por 0 o números demasiado grandes):</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">sin_inicializar</span><span class="p">;</span>
<span class="nx">sin_inicializar</span><span class="p">;</span> <span class="c1">// --&gt; undefined</span>

<span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// --&gt; NaN</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10000</span><span class="p">);</span> <span class="c1">// --&gt; Infinity</span>
</code></pre>
</div>

<h3 id="control-de-flujo">Control de flujo</h3>
<p>Disponemos de las mismas estructuras que en el resto de lenguajes similares:</p>

<ul>
  <li>if-else</li>
  <li>for</li>
  <li>for-in</li>
  <li>while</li>
  <li>do-while</li>
  <li>switch-case</li>
</ul>

<p>La estructura <em>for-in</em> es algo diferente de sus equivalentes en C++ y Java,
y además de arrays nos permite recorrer las propiedades de cualquier objeto:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">recetas</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="na">nombre</span><span class="p">:</span> <span class="s2">"Paella"</span><span class="p">,</span>
        <span class="na">ingrediente_principal</span><span class="p">:</span> <span class="s2">"arroz"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">nombre</span><span class="p">:</span> <span class="s2">"Tortilla"</span><span class="p">,</span>
        <span class="na">ingrediente_principal</span><span class="p">:</span> <span class="s2">"huevo"</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="na">nombre</span><span class="p">:</span> <span class="s2">"Bocata"</span><span class="p">,</span>
        <span class="na">ingrediente_principal</span><span class="p">:</span> <span class="s2">"pan"</span>
    <span class="p">}</span>
<span class="p">];</span>

<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="k">in</span> <span class="nx">recetas</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// i referencia al índice!</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Receta nº "</span> <span class="o">+</span> <span class="nx">i</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">dato</span> <span class="k">in</span> <span class="nx">recetas</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
        <span class="c1">// dato referencia la clave</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">dato</span> <span class="o">+</span> <span class="s2">": "</span> <span class="o">+</span> <span class="nx">recetas</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">dato</span><span class="p">]);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Tenemos dos comparaciones de igualdad, una que convierte tipos implícitamente
para comparar el contenido, y otra que es estricta con los tipos:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">POLO</span> <span class="o">=</span> <span class="mi">28</span><span class="p">;</span>

<span class="c1">// Comparación de igualdad:</span>
<span class="nx">POLO</span> <span class="o">==</span> <span class="s2">"28"</span><span class="p">;</span> <span class="c1">// --&gt; true</span>

<span class="c1">// Comparación de igualdad y tipo:</span>
<span class="nx">POLO</span> <span class="o">===</span> <span class="s2">"28"</span><span class="p">;</span> <span class="c1">// --&gt; false ("28" es String)</span>
</code></pre>
</div>

<p>Por último, también podemos usar los operadores lógicos <code class="highlighter-rouge">||</code> y <code class="highlighter-rouge">&amp;&amp;</code> para control
de flujo, algo muy utilizado para escribir código compatible con todos los
navegadores:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">nodo</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"identificador"</span><span class="p">);</span>

<span class="c1">// Cada navegador aceptará innerText o textContent</span>
<span class="kd">var</span> <span class="nx">texto</span> <span class="o">=</span> <span class="nx">nodo</span><span class="p">.</span><span class="nx">innerText</span> <span class="o">||</span> <span class="nx">nodo</span><span class="p">.</span><span class="nx">textContent</span><span class="p">;</span>
</code></pre>
</div>

<h2 id="el-document-object-model">El Document Object Model</h2>

<h3 id="acceso-a-los-nodos-html">Acceso a los nodos HTML</h3>
<p>Desde luego, si nuestro objetivo es modificar contenido en un sitio web e
interactuar con el usuario, es necesario algo más que todo esto. Para esta tarea
disponemos del <em>Document Object Model</em> o DOM, que básicamente se encarga de
proveer la información de la página web de una forma que sea consistente con el
lenguaje.</p>

<p>Así, tendremos disponibles una serie de objetos, partiendo de <code class="highlighter-rouge">window</code>,
que nos proporcionarán acceso, entre otros, a lo siguiente:</p>

<ul>
  <li><code class="highlighter-rouge">window</code>: Es el padre de todos los objetos del documento. Es indistinto acceder
a <code class="highlighter-rouge">window.objeto</code> y a <code class="highlighter-rouge">objeto</code>. Si declaramos una variable fuera de una función
queda como objeto hijo de <code class="highlighter-rouge">window</code>.</li>
  <li><code class="highlighter-rouge">title</code>: Título de la página.</li>
  <li><code class="highlighter-rouge">location</code>
    <ul>
      <li><code class="highlighter-rouge">location.href</code>: URL de la página.</li>
      <li><code class="highlighter-rouge">location.hash</code>: <em>hash</em> (la parte del URL que viene después del símbolo <code class="highlighter-rouge">#</code>)</li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">document</code>: Acceso a los nodos HTML del documento.
    <ul>
      <li><code class="highlighter-rouge">document.getElementByID(identificador)</code>: Obtiene un nodo mediante el
  identificador HTML (atributo <code class="highlighter-rouge">id</code>).</li>
      <li><code class="highlighter-rouge">document.querySelector(selector)</code>: Obtiene un nodo mediante un selector
  estilo CSS.</li>
      <li><code class="highlighter-rouge">document.createElement(tipo)</code>: Crea un nuevo nodo HTML del tipo
  especificado.</li>
    </ul>
  </li>
</ul>

<dl>
  <dt>Nota</dt>
  <dd>El DOM sólo está disponible cuando se ejecuta JavaScript en una página HTML en
 el cliente. No existe en otros intérpretes de JS como <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/Rhino">Rhino</a> ni en la parte de servidor como en <a href="http://nodejs.org/">node.js</a>.</dd>
</dl>

<h3 id="eventos">Eventos</h3>
<p>Además, para responder a interacciones del usuario disponemos de eventos, es decir, podemos asociar
funciones a acciones de tipo <em>click</em>, <em>key press</em>, <em>drag</em>, etc. de forma que la página web
responda ante ellas. Por ejemplo:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- Nodo HTML: --&gt;</span>
<span class="nt">&lt;input</span> <span class="na">id=</span><span class="s">"mi_boton"</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">value=</span><span class="s">"Púlsame"</span><span class="nt">&gt;</span>
</code></pre>
</div>
<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">alerta_click</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// this referencia al nodo que responde al evento</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Has pulsado el botón "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
<span class="p">};</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#mi_boton"</span><span class="p">).</span><span class="nx">onclick</span> <span class="o">=</span> <span class="nx">alerta_click</span><span class="p">;</span>

<span class="c1">// Otra forma:</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">"#mi_boton"</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">"click"</span><span class="p">,</span> <span class="nx">alerta_click</span><span class="p">);</span>
</code></pre>
</div>

<p>Mucho más sobre eventos en <sup id="fnref:quirksevents"><a href="#fn:quirksevents" class="footnote">4</a></sup>.</p>

<h2 id="orientación-a-objetos-los-prototipos">Orientación a objetos: Los prototipos</h2>

<h3 id="construyendo-objetos">Construyendo objetos</h3>

<p>JavaScript está orientado a objetos, literalmente. No existen las clases en este lenguaje,
sino que podemos crear objetos a partir de otros que llamamos <em>prototipos</em>, que están
asociados a funciones constructoras. Estas funciones son idénticas a
cualquier otra, salvo por que no devuelven un valor, y en su lugar obtenemos un objeto
al utilizarlas con <code class="highlighter-rouge">new</code>. Veamos un ejemplo:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// El constructor</span>
<span class="kd">var</span> <span class="nx">Cancion</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="nx">artista</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">nombre</span> <span class="o">=</span> <span class="nx">nombre</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">artista</span> <span class="o">=</span> <span class="nx">artista</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// Definimos un método en el prototipo</span>
<span class="nx">Cancion</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reproducir</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Reproduciendo "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">nombre</span> <span class="o">+</span> <span class="s2">" de "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">artista</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Creamos un objeto con el constructor</span>
<span class="kd">var</span> <span class="nx">una_cancion</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cancion</span><span class="p">(</span><span class="s2">"Clocks"</span><span class="p">,</span> <span class="s2">"Coldplay"</span><span class="p">);</span>
<span class="nx">una_cancion</span><span class="p">.</span><span class="nx">reproducir</span><span class="p">();</span> <span class="c1">// --&gt; "Reproduciendo Clocks de Coldplay"</span>
</code></pre>
</div>

<p>Mediante la función constructora <code class="highlighter-rouge">Cancion</code> hemos creado un prototipo vacío (en <code class="highlighter-rouge">Cancion.prototype</code>), al que
después hemos añadido el método <code class="highlighter-rouge">reproducir</code>. Al utilizar el prototipo como plantilla,
cada objeto que se cree mediante <code class="highlighter-rouge">new Cancion(...)</code> dispondrá del método. Aun así,
también podemos añadir otros métodos y atributos a cualquier objeto independientemente
del prototipo con que se haya creado.</p>

<h3 id="visibildad-de-datos">Visibildad de datos</h3>

<p>Otra peculiaridad de la orientación a objetos de JS es la falta de encapsulación. Un
dato miembro de un objeto, declarado con <code class="highlighter-rouge">this.dato</code> es visible en cualquier ámbito:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">inception</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Cancion</span><span class="p">(</span><span class="s2">"Time"</span><span class="p">,</span> <span class="s2">"Hans Zimmer"</span><span class="p">);</span>

<span class="c1">// Podemos modificar los datos miembro, e incluso los métodos</span>
<span class="nx">inception</span><span class="p">.</span><span class="nx">nombre</span> <span class="o">=</span> <span class="s2">"Mombasa"</span><span class="p">;</span>
<span class="nx">inception</span><span class="p">.</span><span class="nx">reproducir</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Banda sonora épica"</span><span class="p">);</span>
<span class="p">};</span>
</code></pre>
</div>

<p>Una alternativa para ocultar información es utilizar variables en el constructor, de
forma que solo están visibles en el ámbito de la función constructora. El problema es
que entonces no estarán visibles para los métodos que declaremos en el prototipo.
Podemos sin embargo definir <em>getters</em> dentro del constructor, y utilizarlos en los métodos:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Cancion</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nombre</span><span class="p">,</span> <span class="nx">artista</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">nombre</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">artist</span> <span class="o">=</span> <span class="nx">artista</span><span class="p">;</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">nombre</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">artista</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">artist</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="nx">Cancion</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">reproducir</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Reproduciendo "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">nombre</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" de "</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">artista</span><span class="p">());</span>
<span class="p">};</span>
</code></pre>
</div>

<p>Ahora las variables <code class="highlighter-rouge">name</code> y <code class="highlighter-rouge">artist</code> no son visibles ni modificables fuera del constructor, pero se pueden
consultar mediante los métodos <code class="highlighter-rouge">nombre()</code> y <code class="highlighter-rouge">artista()</code> respectivamente. Esto funciona
porque aunque la función constructora se termine de ejecutar, las variables declaradas
no desaparecen, y permanecen disponibles en los métodos <em>getters</em>.</p>

<dl>
  <dt>Nota</dt>
  <dd>La diferencia entre declarar métodos en el prototipo y declararlos en el constructor
(con <code class="highlighter-rouge">this.metodo</code>) es que los del prototipo se definen una vez y se aplican a todos los
objetos, mientras que los del constructor se definen para cada objeto creado, lo cual
es menos eficiente. Por eso es preferible declarar los métodos en el prototipo<sup id="fnref:jsencapsulation"><a href="#fn:jsencapsulation" class="footnote">5</a></sup>.</dd>
</dl>

<h3 id="herencia">Herencia</h3>

<p>Como era de esperar, la herencia en JavaScript también es bastante particular. No existe
una forma directa de hacer que una función “herede” de otra, por lo que no podemos crear
constructores a partir de constructores anteriores. Sin embargo, podemos escribir constructores
cuyo prototipo asociado sea una instancia de uno ya existente<sup id="fnref:jsinheritance"><a href="#fn:jsinheritance" class="footnote">6</a></sup>:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Parent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Creando objeto de la clase padre"</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">Parent</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">metodo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"Este método se heredará"</span><span class="p">;</span>
<span class="p">};</span>


<span class="c1">// Constructor nuevo</span>
<span class="kd">var</span> <span class="nx">Child</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Este es el constructor de la clase hija"</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">// Usamos el prototipo de la clase padre</span>
<span class="nx">Child</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">();</span>
<span class="c1">// ...pero asociándolo al constructor de la clase hija</span>
<span class="nx">Child</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">Child</span><span class="p">;</span>

<span class="c1">// Podemos añadir métodos</span>
<span class="nx">Child</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">nuevo_metodo</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">"Solo en la clase hija"</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">partest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parent</span><span class="p">();</span>
<span class="nx">partest</span> <span class="k">instanceof</span> <span class="nx">Parent</span><span class="p">;</span> <span class="c1">// --&gt; true</span>
<span class="nx">partest</span> <span class="k">instanceof</span> <span class="nx">Child</span><span class="p">;</span> <span class="c1">// --&gt; false</span>

<span class="kd">var</span> <span class="nx">chitest</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Child</span><span class="p">();</span>
<span class="nx">chitest</span> <span class="k">instanceof</span> <span class="nx">Parent</span><span class="p">;</span> <span class="c1">// --&gt; true</span>
<span class="nx">chitest</span> <span class="k">instanceof</span> <span class="nx">Child</span><span class="p">;</span> <span class="c1">// --&gt; true</span>
</code></pre>
</div>

<p>En este ejemplo hemos creado dos constructores, uno con prototipo
propio, y otro al que asociamos un objeto creado a partir del primer
prototipo. Comprobamos mediante <code class="highlighter-rouge">instanceof</code> que la herencia funciona
como se esperaba, un objeto creado mediante <code class="highlighter-rouge">Child</code> es instancia de este
constructor y del padre, <code class="highlighter-rouge">Parent</code>, y dispone de los métodos de ambos en
su prototipo.</p>

<h2 id="conclusión">Conclusión</h2>

<p>En este artículo hemos visto cómo funciona JavaScript y cómo interactúa
con un sitio web, y hemos estudiado sus posibilidades desde el punto de vista
de la orientación a objetos. Si queréis saber más sobre el lenguaje y
aprender a programar en él, serán muy útiles las referencias a páginas web, y
os puedo recomendar el libro <sup id="fnref:jslibroalarcon"><a href="#fn:jslibroalarcon" class="footnote">7</a></sup>, algo anticuado ya pero
muy completo y conciso.</p>

<div class="footnotes">
  <ol>
    <li id="fn:jsannouncement">
      <p><a href="https://web.archive.org/web/20070916144913/http://wp.netscape.com/newsref/pr/newsrelease67.html">Netscape and Sun announce JavaScript. Press Release</a>&nbsp;<a href="#fnref:jsannouncement" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:mdnjs">
      <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/About_JavaScript">About JavaScript - Mozilla Developer Network</a>&nbsp;<a href="#fnref:mdnjs" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:jsidentifiers">
      <p><a href="http://mathiasbynens.be/notes/javascript-identifiers">Valid JavaScript variable names - Mathias Bynens</a>&nbsp;<a href="#fnref:jsidentifiers" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:quirksevents">
      <p><a href="http://www.quirksmode.org/js/introevents.html">Introduction to Events - Quirks Mode</a>&nbsp;<a href="#fnref:quirksevents" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:jsencapsulation">
      <p><a href="http://aboutcode.net/2011/10/04/efficient-encapsulation-of-javascript-objects.html">Efficient encapsulation of JavaScript objects</a>&nbsp;<a href="#fnref:jsencapsulation" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:jsinheritance">
      <p><a href="http://tobyho.com/2010/11/22/javascript-constructors-and/">Javascript Constructors and Prototypes - Toby Ho</a>&nbsp;<a href="#fnref:jsinheritance" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:jslibroalarcon">
      <p><a href="http://books.google.es/books?id=IJBXNQAACAAJ">JavaScript - Revisado y actualizado 2004</a>, <a href="https://twitter.com/jm_alarcon">José Manuel Alarcón</a>&nbsp;<a href="#fnref:jslibroalarcon" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>



  

  

  <div class="post-data">
    <p class="tag-list">
      <i class="icon icon-tags"></i>
      
      
      
      <span class="em">(sin etiquetas)</span>
      
    </p>
  </div>

</div>
        
  </div>
  <div class="pure-u-1 pure-u-md-1-24 pure-u-lg-1-24"></div>
  <div class="pure-u-1 pure-u-md-7-24 pure-u-lg-7-24">
    
  </div>
</div>



    </article>
  </div>
  <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5 pure-u-xl-1-5"></div>
</div>

      <footer class="pure-g">
  <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5"></div>
  <div class="pure-u-22-24 pure-u-md-22-24 pure-u-lg-3-5">
    <div class="pure-g">
      <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2">
      </div>
      <div class="pure-u-1 pure-u-md-1-2 pure-u-lg-1-2 align-right">
	<h3>Licencia</h3>
	<p><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Licencia de Creative Commons" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" /></a><br />
	  El contenido de este sitio, salvo que se explicite lo contrario, está bajo una <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">licencia de Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional</a>.</p>

        <p>Cada recurso aquí enlazado puede tener copyright con o sin una licencia libre asociada. Por favor respeta la autoría del material y no distribuyas los contenidos salvo que la licencia lo autorice.</p>
      </div>
    </div>
  </div>
  <div class="pure-u-1-24 pure-u-md-1-24 pure-u-lg-1-5"></div>
</footer>


      <!--script id="dsq-count-scr" src="//dgiim.disqus.com/count.js" async></script-->
   </body>
</html>
